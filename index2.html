<!DOCTYPE html>

<html>

  <head>

    <title>My first Three.js app</title>

    <style>
      body { margin: 0; }
      canvas { width: 100%; height: 100% }
    </style>

  </head>

  <body>

    <script src="js/three.min.js"></script>

    <script src="js/shaders/CopyShader.js"></script>
		<script src="js/shaders/Chromo.js"></script>

		<script src="js/postprocessing/EffectComposer.js"></script>
		<script src="js/postprocessing/RenderPass.js"></script>
		<script src="js/postprocessing/MaskPass.js"></script>
		<script src="js/postprocessing/ShaderPass.js"></script>

    <script type="x-shader/x-vertex" id="vertexShader">

      void main() {
      gl_Position = projectionMatrix *
                    modelViewMatrix *
                    vec4(position,1.0);
      }
    </script>

    <script type="x-shader/x-fragment" id="fragmentShader">
      uniform vec3 color;

      float rand(vec2 co){
      return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
      }

      void main() {
      gl_FragColor = vec4(color.r,  // R
                          color.g,  // G
                          color.b,  // B
                          1.0); // A
      }
    </script>

    <script>
    var camera, scene, renderer, composer;
    var object, light;

    init();
    animate();

    function init() {

      renderer = new THREE.WebGLRenderer();
      renderer.setPixelRatio( window.devicePixelRatio );
      renderer.setSize( window.innerWidth, window.innerHeight );
      renderer.setClearColor(0x0000ff, 1);
      document.body.appendChild( renderer.domElement );

      //

      camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );
      camera.position.z = 5;

      scene = new THREE.Scene();
      //scene.fog = new THREE.Fog( 0x000000, 1, 1000 );

      //Create a object
      object = new THREE.Object3D();
      scene.add( object );

      //make cube geometry
      var geometryCube = new THREE.BoxGeometry( 1, 1, 1 );

      //make cube material
      var vShader = document.getElementById('vertexShader').text;
      var fShader = document.getElementById('fragmentShader').text;
      var material =
      new THREE.ShaderMaterial({
        uniforms: {
          color: {type: "c", value: new THREE.Color(0xff0000)}
        },
        vertexShader:   vShader,
        fragmentShader: fShader
      });

      //make cube
      var cube = new THREE.Mesh( geometryCube, material );


      //add it to object
      object.add( cube );

      //var geometryPlane = new THREE.PlaneGeometry(10,10);
      //var materialBlue = material.clone();
      //materialBlue.uniforms = {color: {type: "c", value: new THREE.Color(0x0000ff)}};
      //var plane = new THREE.Mesh( geometryPlane, materialBlue );
      //plane.position.z=-1;

      //object.add( plane );

      // postprocessing

      composer = new THREE.EffectComposer( renderer );
      composer.addPass( new THREE.RenderPass( scene, camera ) );

      var effect = new THREE.ShaderPass( THREE.Chromo );//RGB shift shader
      effect.uniforms[ 'amount' ].value = 0.0015;
      effect.renderToScreen = true;
      composer.addPass( effect );

      //

      window.addEventListener( 'resize', onWindowResize, false );

    }

    function onWindowResize() {

      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();

      renderer.setSize( window.innerWidth, window.innerHeight );

    }

    function animate() {

      requestAnimationFrame( animate );

      object.rotation.x += 0.005;
      object.rotation.y += 0.01;

      composer.render();

    }
    </script>

  </body>

</html>

<!--
http://www.instructables.com/id/Instructables-Universe-in-Threejs/step12/Threejs-Post-processing-Effects-Dimming-Blurring/

http://threejs.org/examples/#webgl_postprocessing

http://learningthreejs.com/blog/2014/04/24/crazy-post-processing-color-effects-to-change-your-game-ambiance-with-threex-dot-coloradjust-game-extension-for-three-dot-js/
 -->
